<div class="row animated fadeIn faster">
    <div class="col-lg-12">

        <div class="ibox float-e-margins">
            <div class="ibox-title-right">
                <button type="button" routerLink="/bills" class="btn btn-primary btn-xs">
                    <i class="fa fa-arrow-left"></i>
                    Regresar
                </button>
            </div>
            <div class="ibox-content">
                <h4 *ngIf="bill.IdMa_Bill != 0" class="float-right">Editando a la factura <b>{{bill.Serie_Bill }}</b>
                </h4>
                <h4 *ngIf="bill.IdMa_Bill == 0" class="float-right">Creando la factura </h4>
                <hr>
                <br>
                <form class="form-horizontal" [formGroup]="forma" novalidate=""
                    (ngSubmit)="edit ? updateBill() : createBill()">

                    <div class="form-group"
                        [ngClass]="{'has-error':forma.touched && !forma.get('Quotation_Serie').valid}">
                        <label class="col-sm-2 control-label">Correlativo Cotización</label>
                        <div class="col-sm-10">
                            <input type="text" formControlName="Quotation_Serie" id="Quotation_Serie"
                                [(ngModel)]="bill.Quotation_Serie" class="form-control" autofocus disabled>
                            <div
                                *ngIf="forma.get('Quotation_Serie').invalid && (forma.get('Quotation_Serie').dirty || forma.get('Quotation_Serie').touched)">
                                <span *ngIf="forma.get('Quotation_Serie').errors.required" style="color: red;">
                                    El Campo es Requerido
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group" [ngClass]="{'has-error':forma.touched && !forma.get('Osce_Serie').valid}">
                        <label class="col-sm-2 control-label">Correlativo OC</label>
                        <div class="col-sm-10">
                            <input type="text" formControlName="Osce_Serie" id="Osce_Serie"
                                [(ngModel)]="bill.Osce_Serie" class="form-control" autofocus disabled>
                            <div
                                *ngIf="forma.get('Osce_Serie').invalid && (forma.get('Osce_Serie').dirty || forma.get('Osce_Serie').touched)">
                                <span *ngIf="forma.get('Osce_Serie').errors.required" style="color: red;">
                                    El Campo es Requerido
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group" [ngClass]="{'has-error':forma.touched && !forma.get('Serie_Bill').valid}">
                        <label class="col-sm-2 control-label">Correlativo Factura</label>
                        <div class="col-sm-10">
                            <input type="text" formControlName="Serie_Bill" id="Serie_Bill"
                                [(ngModel)]="bill.Serie_Bill" class="form-control" autofocus>
                            <div
                                *ngIf="forma.get('Serie_Bill').invalid && (forma.get('Serie_Bill').dirty || forma.get('Serie_Bill').touched)">
                                <span *ngIf="forma.get('Serie_Bill').errors.required" style="color: red;">
                                    El Campo es Requerido
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Empresa </label>
                        <div class="col-sm-10">
                            <select formControlName="Company_Id" [(ngModel)]="bill.Company_Id" class="form-control">
                                <option [value]="company.IdMa_Company" *ngFor="let company of companies">
                                    {{company.Business_Name_Company}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group"
                        [ngClass]="{'has-error':forma.touched && !forma.get('Service_Description').valid}">
                        <label class="col-sm-2 control-label">Servicio</label>
                        <div class="col-sm-10">
                            <input type="text" formControlName="Service_Description" id="Service_Description"
                                [(ngModel)]="bill.Service_Description" class="form-control" autofocus>
                            <div
                                *ngIf="forma.get('Service_Description').invalid && (forma.get('Service_Description').dirty || forma.get('Service_Description').touched)">
                                <span *ngIf="forma.get('Service_Description').errors.required" style="color: red;">
                                    El campo es requerido
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Moneda</label>
                        <div class="col-sm-10">
                            <select formControlName="Moneda_Bill" [(ngModel)]="bill.Moneda_Bill" class="form-control"
                                id="Moneda_Bill" disabled>
                                <option value="Soles">Soles</option>
                                <option value="Dolares">Dolares</option>
                            </select>
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group" [ngClass]="{'has-error':forma.touched && !forma.get('Total_Bill').valid}">
                        <label class="col-sm-2 control-label">Monto a facturar</label>
                        <div class="col-sm-10">
                            <input type="number" formControlName="Total_Bill" id="Total_Bill"
                                [(ngModel)]="bill.Total_Bill" class="form-control numero" autofocus>
                            <span class="showerror0" style="color: red;" hidden>
                                El valor Ingresado es igual o menor a 0.
                            </span>
                            <div
                                *ngIf="forma.get('Total_Bill').invalid && (forma.get('Total_Bill').dirty || forma.get('Total_Bill').touched)">
                                <span *ngIf="forma.get('Total_Bill').errors.required" style="color: red;">
                                    El Campo es Requerido
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group"
                        [ngClass]="{'has-error':forma.touched && !forma.get('Document_Bill').valid}">
                        <label class="col-sm-2 control-label">Ubicación del PDF</label>
                        <div class="col-sm-10">
                            <input type="text" formControlName="Document_Bill" id="Document_Bill"
                                [(ngModel)]="bill.Document_Bill" class="form-control" autofocus readonly>
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Estado</label>
                        <div class="col-sm-10">
                            <select formControlName="Status_Bill" [(ngModel)]="bill.Status_Bill" required
                                class="form-control">
                                <option value="Pendiente">Pendiente</option>
                                <option value="Cerrado">Cerrado</option>
                            </select>
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group" [ngClass]="{'has-error':forma.touched && !forma.get('File_Bill').valid}"
                        *ngIf="bill.IdMa_Bill === 0">
                        <label class="col-sm-2 control-label">Subir archivo</label>
                        <div class="col-sm-10">
                            <input type="file" formControlName="File_Bill" id="File_Bill" class="form-control" autofocus
                                (change)="selectFile($event)">
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group">
                        <div class="col-sm-4 col-sm-offset-2">
                            <button routerLink="/bills" class="btn btn-white" type="submit">Cancelar</button>
                            <button [disabled]="forma.invalid" class="btn btn-primary" type="submit">Guardar</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>