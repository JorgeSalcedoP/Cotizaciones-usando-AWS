<div class="row animated fadeIn faster">
    <div class="col-lg-12">

        <div class="ibox float-e-margins">

            <div class="ibox-title-right">


                <button type="button" routerLink="/usuarios" class="btn btn-primary btn-xs">
                        <i class="fa fa-arrow-left"></i>
                        Regresar
                    </button>




            </div>
            <div class="ibox-content">
                <h4 *ngIf="usuario.nrousu" class="float-right">Editando al usuario <b>{{usuario.usuario}}</b></h4>
                <h4 *ngIf="!usuario.nrousu" class="float-right">Creando al usuario </h4>
                <hr>
                <br>
                <form class="form-horizontal" [formGroup]="forma" (ngSubmit)="guardarCambios(valorimageg4.value)" novalidate="">
                    <div class="form-group" [ngClass]="{'has-error':forma.touched && !forma.get('usuario').valid}">
                        <label class="col-sm-2 control-label">Usuario</label>
                        <div class="col-sm-10">
                            <input [(ngModel)]="usuario.usuario" formControlName="usuario" type="text" class="form-control">

                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">Estado</label>
                        <div class="col-sm-10">
                            <div class="switch">
                                <div class="onoffswitch">
                                    <input [(ngModel)]="usuario.activo" formControlName="activo" type="checkbox" [checked]="usuario.activo" class="onoffswitch-checkbox" id="example1">
                                    <label class="onoffswitch-label" for="example1">
                                            <span class="onoffswitch-inner"></span>
                                            <span class="onoffswitch-switch"></span>
                                        </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="hr-line-dashed"></div>
                    <div class="form-group" [ngClass]="{'has-error':forma.touched && !forma.get('clave').valid}">
                        <label class="col-sm-2 control-label">Password</label>
                        <div class="col-sm-10">
                            <input [(ngModel)]="usuario.clave" formControlName="clave" type="password" class="form-control">
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Nombre</label>
                        <div class="col-sm-10">
                            <input [(ngModel)]="usuario.nombre" formControlName="nombre" type="text" class="form-control">
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Apellido</label>
                        <div class="col-sm-10">
                            <input [(ngModel)]="usuario.apellido" formControlName="apellido" type="text" class="form-control">
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group" [ngClass]="{'has-error':forma.touched && !forma.get('email').valid}">
                        <label class="col-sm-2 control-label">Correo</label>
                        <div class="col-sm-10">
                            <input [(ngModel)]="usuario.email" formControlName="email" type="text" class="form-control" placeholder="ejemplo@chess.com">
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Dirección</label>
                        <div class="col-sm-10">
                            <input [(ngModel)]="usuario.direccion" formControlName="direccion" type="text" class="form-control">
                        </div>
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Teléfono</label>
                        <div class="col-sm-10">
                            <input [(ngModel)]="usuario.telefono" formControlName="telefono" type="text" class="form-control">
                        </div>
                    </div>

                    <div class="hr-line-dashed"></div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Avatar</label>


                        <div class="col-sm-10">
                            <div class="fileinput fileinput-new input-group" data-provides="fileinput">
                                <div class="form-control" data-trigger="fileinput">
                                    <i class="glyphicon glyphicon-file fileinput-exists"></i>
                                    <span class="fileinput-filename"></span>
                                </div>
                                <span class="input-group-addon btn btn-default btn-file">
                                    <span class="fileinput-new">Seleccionar archivo</span>
                                <span class="fileinput-exists">Cambiar</span>
                                <input accept="image/*" (change)="changeListener($event)" [(ngModel)]="usuario.imagen64" formControlName="imagen64" type="file" name="..." />

                                </span>

                                <a (click)="eliminarArchivo()" class="input-group-addon btn btn-default fileinput-exists" data-dismiss="fileinput"><i class="fa fa-trash" aria-hidden="true"></i></a>

                            </div>
                            <span class="animated fadeIn faster" style="color:red" *ngIf="mensaje!==undefined">{{mensaje}}</span>
                            <div>
                                <input style="display: none;" disabled type="text" name="" value="{{imagen}}" id="" #valorimageg4>
                                <img class="img-circle img-md" src="{{usuario.imagen64}}" alt="">

                            </div>
                            <div *ngIf="imagen">

                                <h4>Imagen previa:</h4>
                                <img class="img-thumbnail" src="{{imagen}}" alt="">

                            </div>

                        </div>


                    </div>

                    <div class="hr-line-dashed"></div>
                    <div class="form-group">
                        <div class="col-sm-4 col-sm-offset-2">
                            <button routerLink="/usuarios" class="btn btn-white" type="submit">Cancelar</button>
                            <button [disabled]="forma.invalid" class="btn btn-primary" type="submit">Guardar</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>